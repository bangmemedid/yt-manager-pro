<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YouTube Manager Pro | bangmemed.id</title>
  <link rel="preconnect" href="https://accounts.google.com">
  <link rel="preconnect" href="https://apis.google.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <script>
    const isOwnerLogged = localStorage.getItem("owner_logged_in");
    const ownerName = localStorage.getItem("owner_name") || "Member Premium";
    if (isOwnerLogged !== "true") { window.location.href = "login.html"; }
    window.checkAccess = function(userEmail) { return true; };
  </script>

  <div class="bg-glow"></div>

  <div class="app">
    <aside class="sidebar">
      <div class="side-brand">
        <div class="logo">
          <img alt="yt" src="https://www.gstatic.com/youtube/img/branding/favicon/favicon_96x96.png">
        </div>
        <div class="side-title">
          <div class="name">YouTube Manager Pro</div>
          <div id="ownerDisplay" class="sub" style="color: #22d3ee; font-weight: bold;">Memuat...</div>
        </div>
      </div>

      <nav class="side-nav">
        <a class="side-link active" href="index.html"><i class="fas fa-chart-pie"></i> Dashboard</a>
        <a class="side-link" href="#channel"><i class="fas fa-list"></i> Channel List</a>
        <a class="side-link" href="privacy.html"><i class="fas fa-user-shield"></i> Privacy Policy</a>
        <a class="side-link" href="terms.html"><i class="fas fa-file-alt"></i> Terms of Service</a>
        
        <div style="padding: 0 20px; margin-top: 15px;">
            <button id="btnRefreshData" class="btn success" style="width:100%; font-size: 12px; height: 38px;">
              <i class="fas fa-sync-alt"></i> Refresh Data
            </button>
            <button id="btnLocalLogout" class="btn primary" style="width: 100%; margin-top: 8px; font-size: 11px; height: 38px;">
              Hapus Akun Lokal
            </button>
        </div>
      </nav>

      <div class="side-footer">
        <div class="side-actions" style="padding: 20px;">
          <button id="btnOwnerLogout" class="btn danger" style="width: 100%; font-weight: bold;">KELUAR</button>
        </div>
      </div>
    </aside>

    <main class="main">
      <div class="topbar">
        <div>
          <h1 class="page-title">Dashboard</h1>
          <div id="statusIndicator" class="status-badge" style="display: flex; align-items: center; gap: 8px; margin-top: 10px;">
             <span class="status-dot" style="width:10px; height:10px; background:#ef4444; border-radius:50%; display:inline-block;"></span>
             <div id="statusText" class="page-sub" style="margin-top:0;">Status: Memuat...</div>
          </div>
        </div>

        <div style="display:flex;align-items:center;gap:10px;">
          <div class="search-wrap">
            <div class="search-ic">ðŸ”Ž</div>
            <input id="searchInput" class="search" placeholder="Search channel..." />
          </div>
          <button id="btnAddGmailTop" class="btn primary">+ Tambah Gmail</button>
        </div>
      </div>

      <div class="stats-wrapper">
        <div class="stat-card"><div class="label">Total Channel</div><div class="value" id="totalChannel">0</div></div>
        <div class="stat-card"><div class="label">Total Subscribers</div><div class="value" id="totalSubs">0</div></div>
        <div class="stat-card"><div class="label">Total Views</div><div class="value" id="totalViews">0</div></div>
        <div class="stat-card highlight">
          <div class="label">Realtime (48 Jam)</div>
          <div class="value" id="totalRealtime">0</div>
          <div class="muted">Update: <span id="lastUpdate">N/A</span></div>
        </div>
      </div>

      <section id="channel" class="panel">
        <div class="panel-head" style="flex-wrap: wrap; gap: 10px;">
          <div class="panel-title">Daftar Channel</div>
          <div style="display: flex; gap: 8px; flex-wrap: wrap;">
             <button onclick="exportData()" class="btn ghost" style="font-size: 11px; border: 1px solid #22d3ee; padding: 8px 12px;"><i class="fas fa-copy"></i> Salin Data</button>
             <button onclick="importData()" class="btn ghost" style="font-size: 11px; border: 1px solid #22d3ee; padding: 8px 12px;"><i class="fas fa-file-import"></i> Tempel Data</button>
             <button id="btnExportData" class="btn success" style="font-size: 11px; padding: 8px 12px;"><i class="fas fa-file-excel"></i> Excel</button>
          </div>
        </div>

        <div class="table-wrap">
          <table class="channel-table">
            <thead>
              <tr><th>Channel</th><th>Subs</th><th>Views</th><th style="color:#22d3ee">60m</th><th style="color:#fbbf24">48h</th><th>Status</th></tr>
            </thead>
            <tbody id="channelBody"><tr><td colspan="6" class="empty">Memuat data...</td></tr></tbody>
          </table>
        </div>
      </section>
    </main>
  </div>

  <div id="managerDashboard" style="display:none; position:fixed; inset:0; background:#0f172a; z-index:10000; overflow-y:auto; padding:20px;">
    <div style="max-width:800px; margin:auto;">
        <button class="btn ghost" onclick="closeManager()" style="border:1px solid #22d3ee; color:#22d3ee; margin-bottom:20px;">
            <i class="fas fa-arrow-left"></i> Kembali ke Pantau
        </button>
        
        <div id="activeChannelHeader" style="text-align:center; margin-bottom:30px;"></div>

        <div style="display:grid; grid-template-columns: repeat(2, 1fr); gap:15px;">
            <div class="stat-card" onclick="openAction('upload')" style="cursor:pointer; text-align:center; border:1px solid rgba(255,255,255,0.1); padding:20px;">
                <i class="fas fa-cloud-upload-alt" style="font-size:30px; color:#22d3ee; margin-bottom:10px;"></i>
                <p>Upload Video</p>
            </div>
            <div class="stat-card" onclick="openAction('edit')" style="cursor:pointer; text-align:center; border:1px solid rgba(255,255,255,0.1); padding:20px;">
                <i class="fas fa-edit" style="font-size:30px; color:#fbbf24; margin-bottom:10px;"></i>
                <p>Edit Metadata</p>
            </div>
            <div class="stat-card" onclick="openAction('visibility')" style="cursor:pointer; text-align:center; border:1px solid rgba(255,255,255,0.1); padding:20px;">
                <i class="fas fa-eye" style="font-size:30px; color:#10b981; margin-bottom:10px;"></i>
                <p>Set Visibility</p>
            </div>
            <div class="stat-card" onclick="openAction('schedule')" style="cursor:pointer; text-align:center; border:1px solid rgba(255,255,255,0.1); padding:20px;">
                <i class="fas fa-calendar-alt" style="font-size:30px; color:#22d3ee; margin-bottom:10px;"></i>
                <p>Penjadwalan</p>
            </div>
        </div>

        <div id="formArea" style="margin-top:25px; display:none; background:#1e293b; padding:20px; border-radius:15px; border:1px solid #334155;"></div>
    </div>
  </div>

  <script>document.addEventListener("DOMContentLoaded", () => { document.getElementById("ownerDisplay").textContent = ownerName; });</script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js"></script>
  <script src="script.js" defer></script>
  <script src="manager.js" defer></script>
</body>
</html>
