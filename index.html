<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YouTube Manager Pro | bangmemed.id</title>

  <!-- (Opsional) Percepat load resource Google -->
  <link rel="preconnect" href="https://accounts.google.com">
  <link rel="preconnect" href="https://apis.google.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Font sesuai CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Proteksi: wajib login owner -->
  <script>
    if (localStorage.getItem("owner_logged_in") !== "true") {
      window.location.href = "login.html";
    }
  </script>

  <div class="bg-glow"></div>

  <div class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="side-brand">
        <div class="logo">
          <img alt="yt" src="https://www.gstatic.com/youtube/img/branding/favicon/favicon_96x96.png">
        </div>
        <div class="side-title">
          <div class="name">YouTube Manager Pro</div>
          <div class="sub">bangmemed.id</div>
        </div>
      </div>

      <nav class="side-nav">
        <a class="side-link active" href="index.html"><span class="dot"></span> Dashboard</a>
        <a class="side-link" href="#channel"><span class="dot" style="opacity:.35"></span> Channel List</a>
      </nav>

      <div class="side-footer">
        <div class="hint">
          Mode: <b>Multi Gmail (Merge)</b><br/>
          Token bisa expire Â±1 jam â€” klik <b>Tambah Gmail</b> untuk refresh.
        </div>

        <div class="side-actions">
          <button id="btnAddGmail" class="btn primary">+ Tambah Gmail</button>
          <button id="btnOwnerLogout" class="btn ghost">Logout Owner</button>
          <button id="btnLocalLogout" class="btn danger">Logout Lokal (hapus akun)</button>
        </div>

        <div class="side-note">
          Jika muncul â€œGoogle belum memverifikasi aplikasiâ€, pastikan email sudah masuk <b>Test users</b> di OAuth consent screen.
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <!-- TOPBAR -->
      <div class="topbar">
        <div>
          <h1 class="page-title">Dashboard</h1>
          <div class="page-sub">Pantau performa channel dari beberapa Gmail dalam 1 tampilan.</div>
          <div id="statusText" class="page-sub" style="margin-top:8px;">Status: Memuat...</div>
        </div>

        <div style="display:flex;align-items:center;gap:10px;">
          <div class="search-wrap">
            <div class="search-ic">ğŸ”</div>
            <input id="searchInput" class="search" placeholder="Search channel..." />
          </div>
          <button id="btnAddGmailTop" class="btn primary">+ Tambah Gmail</button>
        </div>
      </div>

      <!-- STATS -->
      <div class="stats-wrapper">
        <div class="stat-card">
          <div class="label">Total Channel</div>
          <div class="value"><span id="totalChannel">0</span></div>
          <div class="muted">Akun</div>
        </div>

        <div class="stat-card">
          <div class="label">Total Subscribers</div>
          <div class="value"><span id="totalSubs">0</span></div>
          <div class="muted">Akumulasi semua channel</div>
        </div>

        <div class="stat-card">
          <div class="label">Total Views</div>
          <div class="value"><span id="totalViews">0</span></div>
          <div class="muted">Akumulasi semua channel</div>
        </div>

        <div class="stat-card highlight">
          <div class="label">Views 60 Menit</div>
          <div class="value"><span id="view60m">â€”</span></div>
          <div class="muted">Realtime per-menit tidak tersedia di API publik</div>
        </div>
      </div>

      <!-- TABLE PANEL -->
      <section id="channel" class="panel">
        <div class="panel-head">
          <div>
            <div class="panel-title">Daftar Channel</div>
            <div class="panel-sub">Merge dari semua Gmail yang ditambahkan</div>
          </div>
          <div class="tiny">Status: data channel YouTube</div>
        </div>

        <div class="table-wrap">
          <table class="channel-table">
            <thead>
              <tr>
                <th>Channel</th>
                <th>Subs</th>
                <th>Videos</th>
                <th>Views</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="channelBody">
              <tr>
                <td colspan="5" class="empty">Belum ada data. Klik <b>Tambah Gmail</b> lalu izinkan akses.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <div class="footer">
        <div>Â© 2026 YouTube Manager Pro â€” bangmemed.id</div>
        <div>Premium UI â€¢ Multi Gmail â€¢ Merge Dashboard</div>
      </div>
    </main>
  </div>

  <!-- =========================
       GOOGLE LIBS (WAJIB)
       URUTAN HARUS SEPERTI INI
  ========================== -->

  <!-- 1) Google Identity Services (GIS) -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- 2) Google API Client (gapi) -->
  <script src="https://apis.google.com/js/api.js"></script>

  <!-- 3) Script utama aplikasi (pakai defer biar makin stabil di semua device) -->
  <script src="script.js" defer></script>
</body>
</html>
